<view class="container">
  <!-- å¤´éƒ¨ç»Ÿè®¡ -->
  <view class="stats-section">
    <view class="stat-item">
      <view class="stat-value">{{productStats.total}}</view>
      <view class="stat-label">å•†å“æ€»æ•°</view>
    </view>
    <view class="stat-item">
      <view class="stat-value">{{productStats.categories}}</view>
      <view class="stat-label">å•†å“ç±»ç›®</view>
    </view>
    <view class="stat-item">
      <view class="stat-value">{{productStats.lowStock}}</view>
      <view class="stat-label">ä½åº“å­˜</view>
    </view>
  </view>

  <!-- æœç´¢å’Œç­›é€‰ -->
  <view class="search-section">
    <view class="search-bar">
      <input placeholder="æœç´¢å•†å“åç§°" value="{{searchText}}" bindinput="onSearchInput" />
      <button class="search-btn" bindtap="onSearch">æœç´¢</button>
    </view>
    <view class="filter-bar">
      <picker bindchange="onCategoryChange" value="{{categoryIndex}}" range="{{categoryList}}" range-key="name">
        <view class="picker">
          {{categoryList[categoryIndex].name}}
        </view>
      </picker>
    </view>
  </view>

  <!-- å•†å“åˆ—è¡¨ -->
  <view class="product-list" wx:if="{{products.length > 0}}">
    <view class="product-item" wx:for="{{products}}" wx:key="_id" bindtap="navigateToDetail" data-id="{{item._id}}">
      <view class="product-image">
        <image src="{{item.images[0] || '/assets/images/default-product.png'}}" mode="aspectFill" />
        <view class="stock-badge {{item.stock <= item.minStock ? 'low' : 'normal'}}">
          åº“å­˜{{item.stock}}
        </view>
      </view>
      <view class="product-info">
        <view class="product-name">{{item.name}}</view>
        <view class="product-category">{{item.category}}</view>
        <view class="product-price">
          <text class="current-price">ï¿¥{{item.price}}</text>
          <text class="unit">/{{item.unit}}</text>
        </view>
        <view class="product-stats">
          <text class="sales">é”€é‡ {{item.salesCount || 0}}</text>
          <text class="rating" wx:if="{{item.rating}}">è¯„åˆ† {{item.rating}}</text>
        </view>
      </view>
      <view class="product-actions">
        <button class="action-btn" bindtap="addToCart" data-product="{{item}}" catchtap="true">åŠ å…¥è´­ç‰©è½¦</button>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:else>
    <view class="empty-icon">ğŸ“±</view>
    <view class="empty-text">æš‚æ— å•†å“æ•°æ®</view>
  </view>
</view>
